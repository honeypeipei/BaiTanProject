---

AddHierarchy:
  dec: 创建层级
  parameters:
    - casedec: "创建二级层级"
      url: /hierarchy/add
      selectsql:

      data:
        -
          name: ""
          parent_id: 1
          description: "这是二级组织描述"
      header: {
        "Content-Type": "application/json;charset=utf-8",
        "X-Api-Version": "1.X"
      }
      responsecode: 200
      responsesql: select name from sys_hierarchy where parent_id = 1

    - casedec: "创建三级层级"
      url: /hierarchy/add
      selectsql: SELECT id from sys_hierarchy where parent_id = 1 ORDER BY RAND() LIMIT 1
      data:
        - name: ""
          parent_id:
          description: "这是三级组织描述"
      header: {
        "Content-Type": "application/json;charset=utf-8",
        "X-Api-Version": "1.X"
      }
      responsecode: 200
      responsesql: SELECT name from sys_hierarchy where parent_id ='@sqlresult';

    - casedec: "名称超长"
      url: /hierarchy/add
      selectsql: SELECT id from sys_hierarchy where parent_id IS NULL ORDER BY RAND() LIMIT 1
      data:
        - name: "公司公司公司公司公司公司公司公司公司公司公司公司公司公司公司公司公司"
          parent_id: 55
      header: {
        "Content-Type": "application/json;charset=utf-8",
        "X-Api-Version": "1.X"
      }
      responsecode: 200
      responsesql: SELECT id,name,parent_id from tb_hierarchy where id ='@sqlresult';

    - casedec: "parent_id不存在"
      url: /hierarchy/add
      selectsql: SELECT id from sys_hierarchy where parent_id IS NULL ORDER BY RAND() LIMIT 1
      data:
        - name: "公司"
          parent_id: 99999
      header: {
        "Content-Type": "application/json;charset=utf-8",
        "X-Api-Version": "1.X"
      }
      responsecode: 204
      responsesql: SELECT id,name,parent_id from sys_hierarchy where id ='@sqlresult';

    - casedec: "name节点缺失"
      url: /hierarchy/add
      selectsql: SELECT id from sys_hierarchy where parent_id IS NULL ORDER BY RAND() LIMIT 1
      data:
        - parent_id: 99999
      header: {
        "Content-Type": "application/json;charset=utf-8",
        "X-Api-Version": "1.X"
      }
      responsecode: 200
      responsesql: SELECT id,name,parent_id from tb_hierarchy where id ='@sqlresult';

    - casedec: "name值传空"
      url: /hierarchy/add
      selectsql: SELECT id from sys_hierarchy where parent_id IS NULL ORDER BY RAND() LIMIT 1
      data:
        - name:
          parent_id: 99999
      header: {
        "Content-Type": "application/json;charset=utf-8",
        "X-Api-Version": "1.X"
      }
      responsecode: 200
      responsesql: SELECT id,name,parent_id from tb_hierarchy where id ='@sqlresult';

    - casedec: "name=''"
      url: /hierarchy/add
      selectsql: SELECT id from sys_hierarchy where parent_id IS NULL ORDER BY RAND() LIMIT 1
      data:
        - name: ''
          parent_id: 99999
      header: {
        "Content-Type": "application/json;charset=utf-8",
        "X-Api-Version": "1.X"
      }
      responsecode: 200
      responsesql: SELECT id,name,parent_id from sys_hierarchy where id ='@sqlresult';

    - casedec: "一级name重复"
      url: /hierarchy/add
      selectsql: SELECT name,parent_id from sys_hierarchy where parent_id IS  NULL ORDER BY RAND() LIMIT 1
      data:
        - name: '公司'
      header: {
        "Content-Type": "application/json;charset=utf-8",
        "X-Api-Version": "1.X"
      }
      responsecode: 204
      responsesql: SELECT id,name,parent_id from tb_hierarchy where id ='@sqlresult';